  @startuml
    actor Admin as U
    participant Strona
    participant StronaUżytkownika
    participant FormularzEdycjiAdresuEmail
    control AccountService
    entity Account

  U -> Strona: Naciśnij przycisk "Wyświetl listę użytkowników"
  Strona -> AccountService: Wczytaj listę kont użytkowników
    activate AccountService
  AccountService --> Strona: Wczytano listę kont użytkowników
  U -> Strona: Wybierz konto użytkownika
  Strona -> StronaUżytkownika: Wczytaj szczegóły konta użytkownika
  StronaUżytkownika -> AccountService: Wczytaj szczegóły konta użytkownika
  AccountService -> Account: Pobierz zawartość pól obiektu Account
    activate Account
  Account --> AccountService: Pobierano zawartość pól obiektu Account
  AccountService --> StronaUżytkownika: Wczytano szczegóły konta użytkownika
  U -> StronaUżytkownika: Naciśnij przycisk "Edytuj adres e-mail użytkownika"

  StronaUżytkownika -> FormularzEdycjiAdresuEmail: Załaduj formularz edycji adresu e-mail
  group <<transaction>> RW, READ COMMITTED, zakres: \n- wykonanie zapytania do tabeli account,\n- edycja rekordu tabeli account
  FormularzEdycjiAdresuEmail --> AccountService: Załaduj dane do formularz edycji adresu e-mail
  AccountService -> Account: Pobierz dane do formularz edycji adresu e-mail
  Account --> AccountService: Pobrano dane do formularz edycji adresu e-mail
  AccountService --> FormularzEdycjiAdresuEmail: Załadowano dane do formularza edycji adresu e-mail
  U -> FormularzEdycjiAdresuEmail: Wprowadź nowy adres e-mail

  FormularzEdycjiAdresuEmail -> AccountService: Zatwierdź formularz zmiany adresu e-mail użytkownika
    alt wprowadzony adres e-mail jest niepoprawny
    opt format wprowadzonego adresu e-mail jest niepoprawny
    AccountService --> FormularzEdycjiAdresuEmail: Format wprowadzonego adresu e-mail jest niepoprawny
    FormularzEdycjiAdresuEmail --> StronaUżytkownika: Pokaż ostrzeżenie o niepoprawnym formacie wprowadzonego adresu e-mail
    else wprowadzony adres e-mail jest już przypisany do istniejącego konta
    FormularzEdycjiAdresuEmail -> AccountService: Sprawdź czy wprowadzony adres e-mail jest już przypisany do istniejącego konta
    AccountService --> FormularzEdycjiAdresuEmail: Wprowadzony adres e-mail jest już przypisany do istniejącego konta
    FormularzEdycjiAdresuEmail --> StronaUżytkownika: Pokaż ostrzeżenie o przypisaniu adresu e-mail do istniejącego konta
    end
    else wprowadzony adres e-mail jest poprawny
      AccountService -> Account: Zmień pole email obiektu Account
      Account --> AccountService: Wartość pola email obiektu Account została zmieniona
      AccountService --> StronaUżytkownika: Dane osobowe zostały zaktualizowane

    end
    end
    
    @enduml